"use strict";(self.webpackChunkclient360=self.webpackChunkclient360||[]).push([[555],{93555:function(e,l,n){n.r(l),n.d(l,{default:function(){return S}});var a=n(41806),i=n(61113),t=n(47825),r=n(42832),o=n(73428),s=n(75419),d=n(85833),c=n(70816),u=n.n(c),h=n(47313),x=n(6210),m=n(67662),p=n(23195),v=n(9019),j=n(31095),Z=n(66149),f=n(4117),g=n(96467),b=n(97762),y=n(33604),C=n(35460),_=n(46417);var w=e=>{const{open:l,handleClose:n,data:a}=e;return(0,_.jsxs)(Z.Z,{open:l,fullWidth:!0,onClose:n,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,_.jsxs)(y.Z,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,_.jsxs)(i.Z,{style:{textTransform:"capitalize"},variant:"h2",children:["Phone Number: ",null===a||void 0===a?void 0:a.phoneNumber]}),(0,_.jsx)(i.Z,{children:(0,_.jsx)(p.Z,{onClick:n,style:{cursor:"pointer"}})})]}),(0,_.jsx)(g.Z,{dividers:!0,children:(0,_.jsxs)(b.Z,{id:"scroll-dialog-description",tabIndex:-1,children:[(0,_.jsx)(i.Z,{style:{marginBottom:"15px"},variant:"h4",children:"Call Information"}),(0,_.jsxs)(v.ZP,{style:{marginBottom:"15px"},container:!0,rowSpacing:3,columnSpacing:{xs:12},children:[(0,_.jsx)(v.ZP,{item:!0,xs:4,children:(0,_.jsx)(i.Z,{style:{fontWeight:"bold"},variant:"p",children:"Call Duration"})}),(0,_.jsx)(v.ZP,{item:!0,xs:8,children:(0,_.jsxs)(i.Z,{variant:"p",children:[null===a||void 0===a?void 0:a.call_duration," mins"]})})]}),(0,_.jsxs)(v.ZP,{style:{marginBottom:"15px"},container:!0,rowSpacing:3,columnSpacing:{xs:12},children:[(0,_.jsx)(v.ZP,{item:!0,xs:4,children:(0,_.jsx)(i.Z,{style:{fontWeight:"bold"},variant:"p",children:"Call Summary"})}),(0,_.jsx)(v.ZP,{item:!0,xs:8,children:(0,_.jsx)(i.Z,{variant:"p",children:null===a||void 0===a?void 0:a.call_summary})})]}),(0,_.jsxs)(v.ZP,{style:{marginBottom:"15px"},container:!0,rowSpacing:3,columnSpacing:{xs:12},children:[(0,_.jsx)(v.ZP,{item:!0,xs:4,children:(0,_.jsx)(i.Z,{style:{fontWeight:"bold"},variant:"p",children:"Call Date"})}),(0,_.jsx)(v.ZP,{item:!0,xs:8,children:(0,_.jsx)(i.Z,{variant:"p",children:u()(null===a||void 0===a?void 0:a.created_at).format("h:mm A DD-MM-YYYY")})})]})]})}),(0,_.jsx)(f.Z,{children:(0,_.jsx)(j.Z,{onClick:n,variant:"contained",sx:{backgroundColor:C.Z.info,"&:hover":{backgroundColor:C.Z.infoDark}},children:"Close"})})]})};var S=()=>{const[e,l]=(0,h.useState)(!1),[n,c]=(0,h.useState)(null),[p,v]=(0,h.useState)([]),[j,Z]=(0,h.useState)([]),f=e=>{const l={caller_number:"phoneNumber",caller_duration:"call_duration",caller_summary:"call_summary",created_at:"created_at"},n=e.map(((e,n)=>function(e,l){const n={};return Object.keys(e).forEach((a=>{a in l?n[l[a]]=e[a]:n[a]=e[a]})),n}(e,l)));Z(n)};(0,h.useEffect)((()=>{(async()=>{try{const e=await(0,x.ac)("api/lead/badleads");v(e.data.data.leadsData)}catch(e){console.log(e)}})()}),[]),(0,h.useEffect)((()=>{f(p)}),[p]);const[g,b]=(0,h.useState)([]);(0,h.useEffect)((()=>{y(j)}),[j]);const y=e=>{e.sort(((e,l)=>new Date(e.created_at)-new Date(l.created_at))),b(e)},C=[{field:"phoneNumber",headerName:"Phone Number",flex:1,cellClassName:"name-column--cell name-column--cell--capitalize",renderCell:e=>(0,_.jsx)(a.Z,{onClick:()=>{c(null===e||void 0===e?void 0:e.row),l(!0)},children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:"No Name"})},{field:"call_duration",headerName:"Call Duration",flex:1,renderCell:e=>(0,_.jsx)(a.Z,{children:null!==e&&void 0!==e&&e.value?`${null===e||void 0===e?void 0:e.value} mins`:"N/A"})},{field:"call_summary",headerName:"Call Summary",flex:2,renderCell:e=>(0,_.jsx)(a.Z,{style:{textWrap:"wrap"},children:null!==e&&void 0!==e&&e.value?null===e||void 0===e?void 0:e.value:"N/A"})},{field:"created_at",headerName:"Date",flex:1,renderCell:e=>{var l;return(0,_.jsx)(i.Z,{style:{color:"black"},children:u()(null===e||void 0===e||null===(l=e.row)||void 0===l?void 0:l.created_at).format("h:mm A DD-MM-YYYY")})}}];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(w,{open:e,data:n,handleClose:()=>l(!1)}),(0,_.jsxs)(t.Z,{children:[(0,_.jsx)(r.Z,{direction:"row",alignItems:"center",mb:5,justifyContent:"space-between",children:(0,_.jsx)(i.Z,{variant:"h4",children:"No-Answer"})}),(0,_.jsx)(m.Z,{children:(0,_.jsx)(a.Z,{width:"100%",children:(0,_.jsx)(o.Z,{style:{height:"600px",paddingTop:"10px"},children:p&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(i.Z,{variant:"h4",sx:{margin:"2px 15px"},children:["Leads ( ",null===p||void 0===p?void 0:p.length," )"]}),(0,_.jsx)(s._$,{rows:g,columns:C,checkboxSelection:!0,getRowId:e=>null!==e&&void 0!==e&&e._id?null===e||void 0===e?void 0:e._id:null===e||void 0===e?void 0:e.call_id,initialState:{pagination:{paginationModel:{page:0,pageSize:10}}},slots:{toolbar:d.n},pageSizeOptions:[5,20],slotProps:{toolbar:{showQuickFilter:!0,printOptions:{disableToolbarButton:!0}}}})]})})})})]})]})}}}]);